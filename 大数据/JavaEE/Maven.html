<html>
<head>
  <title>Maven</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/603932 (zh-CN, DDL); Windows/10.0.0 (Win64); EDAMVersion=V2;"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 12pt;
    }
  </style>
</head>
<body>
<a name="7441"/>
<h1>Maven</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>创建时间：</b></td><td><i>2020/9/17 15:47</i></td></tr>
<tr><td><b>更新时间：</b></td><td><i>2021/7/25 16:51</i></td></tr>
</table>
</div>
<br/>

<div>
<span><div>1.什么是maven</div><div>  Maven的中文意思是专家,内行。</div><div>  maven是一个<span style="color: rgb(166, 0, 196);">项目构建,依赖管理,项目信息管理</span>的工具。<span style="font-size: unset; color: unset; font-family: unset;">不涉及编码,主要是改变编码方式。</span></div><div>  主要针对于javase, javaee,即可用于瀑布式开发,也可用于敏捷开发。</div><div style="margin-left: 40px;">现在只有内部使用的工具才会更多的使用瀑布开发, 全部开发完成,整体上线。 现在大部分的商业开发都是敏捷开发, 先做好一个主体框架,让软件项目能运行,其他一些小功能之后再慢慢添加</div><div>2.项目构建 </div><div>    程序员每天干的活: (真正写代码的时间很少)</div><div>    <img src="Maven_files/Image.png" type="image/png" data-filename="Image.png" width="382"/></div><div>   把下面这些, 与编码无关但又不得不做的事情就叫做项目构建:</div><div>        清理(即 将之前生成的内容清除掉)--&gt;编译--&gt;单元测试--&gt;打包--&gt;部署</div><div>  市面上的项目构建工具:</div><div>    Ant : apache项目,项目构建工具。(不能管理依赖(jar包)、信息(各种生成信息),也即是不能打包、部署等)</div><div>    eclipse : 一个ide,可以做项目构建,依赖管理,信息管理。但是<span style="font-size: unset; color: unset; font-family: unset;">手工操作比较多,浪费时间。</span></div><div>    maven : apache项目,也是一个项目构建和依赖管理工具。采用的是<span style="font-size: unset; color: unset; font-family: unset;">pom(项目对象模型),通过xml的简单配置,就可以实现管理。</span><span style="font-size: unset; color: unset; font-family: unset;">支持一键式操作(即通过几条简单命令即可做到所有的事)      </span></div><div>    gradle : 与maven最大的差别是maven是通过xml进行配置的,而gradle是通过groovy语言进行配置, groovy语言比xml简单很多,有点类似于json。      </div><div>3.依赖管理(即<span style="font-size: unset; color: unset; font-family: unset;">jar包的管理</span>)</div><div>jar包的管理方式</div><div>  1)项目管理的方式:</div><div>    (1)以前管理jar包是直接把jar复制到项目中,放在项目里。缺点是会导致项目太大, 项目里jar包就占了很大的空间</div><div>    (2)或者通过引用的方式,链接到本地依赖库路径。这种方式的缺陷就是不利于代码移植,上传到项目库后,别人下到自己电脑是用不了的, 需要重新引用。</div><div>    以上两种方式在eclipse的项目中可以体现为如下图的形式: </div><div>    <img src="Maven_files/Image [1].png" type="image/png" data-filename="Image.png"/></div><div>    (3)maven--&gt;仓库(repository)。仓库包含有中央仓库、本地仓库和私服。</div><div>    中央仓库: 是一个远程服务器(该服务器上放了很多资源,比如jar包)</div><div>    本地仓库: 即存储本地资源(比如jar包)的地方(不是放在项目里,否则项目还是很大)</div><div>    私服: 远程服务器可能在国内, 使用起来不方便, 私服就是自己(或小公司)搭建一个服务器来储存中央仓库中的这些资源, 然后本地仓库需要资源(比如jar包)的话可以直接从私服下载而不需要从中央仓库下载。(类似于外国软件在国内的镜像站)</div><div>        maven可以解决上面(1)(2)的项目管理方式所存在的问题, 一键式管理, 非常方便省事,不让jar包的导入浪费我们的时间和项目空间。</div><div>        maven进行仓库管理的结构图如下:</div><div>        <img src="Maven_files/Image [2].png" type="image/png" data-filename="Image.png" width="565"/></div><div>        </div><div>  2)依赖冲突(jar包版本不对应等一系列问题): maven可以解决版本不一致导致项目无法运行的情况 --&gt;通过 gav(唯一坐标), 每个依赖的jar包名在pom.xml里都有配置唯一gav与之对应,也就意味着只有一个版本的jar, 也就不会存在版本不一致的问题。</div><div>  3)约定优于配置(代码写的规范很重要,增强可读性): maven对项目有要求。对目录结构、类名等都有规范。</div><div>-----------------------------------------------------------------------------------------------------------------------------</div><div><span style="font-weight: bold;">4.maven的下载和安装</span></div><div>  4.1 下载。下面两个地址择一即可:</div><div>    <a href="http://maven.apache.org/">http://maven.apache.org/</a></div><div>    <a href="http://archive.apache.org/dist/">http://archive.apache.org/dist/</a></div><div>  4.2 安装</div><div>    <span style="color: rgb(255, 0, 0);">1.解压apache-maven-3.6.0-bin.zip到非中文路径</span></div><div>        <img src="Maven_files/Image [3].png" type="image/png" data-filename="Image.png" width="792"/></div><div style="margin-left: 80px;">   研究一下解压出来后的目录结构:</div><div style="margin-left: 80px;">      bin: 二进制可执行文件(主要用到的是里面的mvn)</div><div style="margin-left: 80px;">      boot: maven启动时需要加载的jar</div><div style="margin-left: 80px;">      conf: 配置文件目录(里面有个settings.xml是maven的配置文件)</div><div style="margin-left: 80px;">      lib: 一些依赖jar</div><div><br/></div><div style="margin-left: 40px;"><span style="font-size: unset; color: rgb(255, 0, 0); font-family: unset;">因为中央仓库很可能传输速度慢,或者太远, 远在国外, 所以提前准备了一个本地仓库文件压缩包repo.zip,里面有很多已经提前下好的jar包, 这样在项目需要jar包时,如果本地仓库有,就不需要临时去中央仓库下载了,直接引用本地的即可。将</span><span style="font-size: unset; color: rgb(255, 0, 0); font-family: unset;">repo.zip</span><span style="font-size: unset; color: rgb(255, 0, 0); font-family: unset;">解压缩后, 和maven安装包放在同一个目录下, 如下: </span></div><div>        <img src="Maven_files/Image [4].png" type="image/png" data-filename="Image.png" width="835"/></div><div><br/></div><div>  <span style="color: rgb(255, 0, 0);">  2.配置一下位于安装包的conf目录下的配置文件settings.xml</span></div><div style="margin-left: 40px;"><span style="color: rgb(166, 0, 196);">maven中有两种配置, 一种是全局配置(给所有用户配置的属性,所有的用户共用该属性,读取的就是安装包里的conf/settings.xml文件), 一种是用户配置(只给当前用户配置的属性,需要在当前用户自己独立拥有的settings.xml文件里配置, 读取的是用户家目录里的settings.xml文件,即${user.name}/.m2/settings.xml文件),如果需要单独给某用户配置属性, 则把全局配置的settings.xml文件复制到${user.name}/.m2/目录下,再进行一些修改即可。这里我们暂时只配置全局配置。</span></div><div>        </div><div>       <span style="color: rgb(255, 0, 0);">(1)打开settings.xml, 找到如下图的关键字配置本地仓库的路径</span></div><div>        <img src="Maven_files/Image [5].png" type="image/png" data-filename="Image.png" width="648"/></div><div style="margin-left: 40px;"><span style="color: rgb(255, 0, 0);">这里可以修改一下我们Windows平台的本地仓库的路径。因为前面已经有了</span><span style="font-size: unset; color: rgb(255, 0, 0); font-family: unset;">repo.zip</span><span style="color: rgb(255, 0, 0);">压缩包解压出来的本地仓库, 所以就把本地仓库设在该路径下, 可以少花时间下载很多资源。也就是在配置文件中添加一行如下:</span></div><div>        <img src="Maven_files/Image [6].png" type="image/png" data-filename="Image.png" width="814"/></div><div><br/></div><div>   <span style="color: rgb(255, 0, 0);">     (2)同样是在settings.xml里, 找到如下图:</span></div><div style="margin-left: 40px;"><span style="color: rgb(255, 0, 0);">这里是配置远程仓库的路径, 因为中央仓库的下载速度可能比较慢, 所以可以修改一下,配置成私服的路径。</span></div><div><span style="color: rgb(255, 0, 0);">        配置成阿里云私服如下:</span></div><div>        <img src="Maven_files/Image [7].png" type="image/png" data-filename="Image.png" width="710"/></div><div>        <span style="color: rgb(255, 0, 0);">也即是在&lt;mirrors&gt; &lt;/mirrors&gt;关键字之间添加如下内容:</span></div><div style="margin-left: 40px;"><span style="color: rgb(255, 0, 0);">    &lt;mirror&gt;    </span></div><div style="margin-left: 40px;"><span style="color: rgb(255, 0, 0);">       &lt;id&gt;nexus-aliyun&lt;/id&gt;    </span></div><div style="margin-left: 40px;"><span style="color: rgb(255, 0, 0);">       &lt;mirrorOf&gt;*&lt;/mirrorOf&gt;    </span></div><div style="margin-left: 40px;"><span style="color: rgb(255, 0, 0);">       &lt;name&gt;Nexus aliyun&lt;/name&gt;    </span></div><div style="margin-left: 40px;"><span style="color: rgb(255, 0, 0);">       &lt;url&gt;</span><a href="http://maven.aliyun.com/nexus/content/groups/public" style="color: rgb(255, 0, 0);">http://maven.aliyun.com/nexus/content/groups/public</a><span style="color: rgb(255, 0, 0);">&lt;/url&gt;    </span></div><div style="margin-left: 40px;"><span style="color: rgb(255, 0, 0);">     &lt;/mirror&gt;</span></div><div style="margin-left: 40px;"><br/></div><div>          <span style="color: rgb(255, 0, 0);">  (3)</span><span style="color: rgb(166, 0, 196);">（这步其实可以不做）</span><span style="color: rgb(255, 0, 0);">再在settings.xml里, 找到如下图。配置jdk的版本为和自己安装的jdk适配的版本</span><span style="color: rgb(255, 0, 0);">。配置为如下:</span></div><div>            <img src="Maven_files/Image [8].png" type="image/png" data-filename="Image.png" width="727"/></div><div>          <span style="color: rgb(255, 0, 0);">  也即是在&lt;profiles&gt; &lt;/profiles&gt; 关键字之间添加如下内容:</span></div><div style="margin-left: 80px;"><span style="color: rgb(255, 0, 0);">    &lt;profile&gt;       </span></div><div style="margin-left: 80px;"><span style="color: rgb(255, 0, 0);">       &lt;id&gt;jdk-1.8&lt;/id&gt;       </span></div><div style="margin-left: 80px;"><span style="color: rgb(255, 0, 0);">       &lt;activation&gt;       </span></div><div style="margin-left: 80px;"><span style="color: rgb(255, 0, 0);">           &lt;activeByDefault&gt;true&lt;/activeByDefault&gt;       </span></div><div style="margin-left: 80px;"><span style="color: rgb(255, 0, 0);">           &lt;jdk&gt;1.8&lt;/jdk&gt;       </span></div><div style="margin-left: 80px;"><span style="color: rgb(255, 0, 0);">       &lt;/activation&gt;       </span></div><div style="margin-left: 80px;"><span style="color: rgb(255, 0, 0);">       &lt;properties&gt;       </span></div><div style="margin-left: 80px;"><span style="color: rgb(255, 0, 0);">           &lt;</span><a href="http://maven.compiler.source/" style="color: rgb(255, 0, 0);">maven.compiler.source</a><span style="color: rgb(255, 0, 0);">&gt;1.8&lt;/</span><a href="http://maven.compiler.source/" style="color: rgb(255, 0, 0);">maven.compiler.source</a><span style="color: rgb(255, 0, 0);">&gt;       </span></div><div style="margin-left: 80px;"><span style="color: rgb(255, 0, 0);">           &lt;</span><a href="http://maven.compiler.target/" style="color: rgb(255, 0, 0);">maven.compiler.target</a><span style="color: rgb(255, 0, 0);">&gt;1.8&lt;/</span><a href="http://maven.compiler.target/" style="color: rgb(255, 0, 0);">maven.compiler.target</a><span style="color: rgb(255, 0, 0);">&gt;       </span></div><div style="margin-left: 80px;"><span style="color: rgb(255, 0, 0);">           &lt;</span><a href="http://maven.compiler.compilerversion/" style="color: rgb(255, 0, 0);">maven.compiler.compilerVersion</a><span style="color: rgb(255, 0, 0);">&gt;1.8&lt;/</span><a href="http://maven.compiler.compilerversion/" style="color: rgb(255, 0, 0);">maven.compiler.compilerVersion</a><span style="color: rgb(255, 0, 0);">&gt;  </span></div><div style="margin-left: 80px;"><span style="color: rgb(255, 0, 0);">       &lt;/properties&gt;       </span></div><div style="margin-left: 80px;"><span style="color: rgb(255, 0, 0);">    &lt;/profile&gt;     </span></div><div style="margin-left: 80px;">             </div><div>   <span style="color: rgb(255, 0, 0);"> 3.配置环境变量</span></div><div><span style="color: rgb(255, 0, 0);">      如果是在Windows系统里,则是新建MAVEN_HOME系统环境变量为maven目录, 如下:</span></div><div><span style="color: rgb(255, 0, 0);">        <img src="Maven_files/Image [9].png" type="image/png" data-filename="Image.png" width="474"/></span></div><div><span style="color: rgb(255, 0, 0);">        然后,再在Path系统环境变量里添加一行 %MAVEN_HOME%\bin 。如下</span></div><div><span style="color: rgb(255, 0, 0);">        </span><span style="color: rgb(255, 0, 0);"><img src="Maven_files/Image [10].png" type="image/png" data-filename="Image.png" width="550"/></span></div><div><br/></div><div>    <span style="color: rgb(255, 0, 0);">如果是在Linux环境里,则只需:</span></div><div><span style="color: rgb(255, 0, 0);">        如果是hadoop用户下安装, 则:</span></div><div style="margin-left: 40px;">      <span style="color: rgb(255, 0, 0);">  vim /home/hadoop/.bashrc</span></div><div style="margin-left: 40px;"><span style="color: rgb(255, 0, 0);">        末尾添加如下两行:</span></div><div style="margin-left: 40px;"><span style="color: rgb(255, 0, 0);">         export </span><span style="color: rgb(255, 0, 0);">MAVEM_HOME</span><span style="color: rgb(255, 0, 0);">=/home/hadoop/apps/</span><span style="color: rgb(255, 0, 0);">apache-maven-3.6.0</span></div><div style="margin-left: 40px;"><span style="color: rgb(255, 0, 0);">         export PATH=$PATH:$</span><span style="color: rgb(255, 0, 0);">MAVEM_HOME</span><span style="color: rgb(255, 0, 0);">/bin</span></div><div style="margin-left: 40px;"><span style="color: rgb(255, 0, 0);">        </span><span style="color: rgb(255, 0, 0);"> 再重新加载配置文件: source /home/hadoop/.bashrc</span></div><div style="margin-left: 40px;"><span style="color: rgb(255, 0, 0);">如果是root用户下安装, 则: </span> <span style="color: rgb(166, 0, 196);">(我在自己虚拟机的hadoop05的root用户下已经安装了maven)</span></div><div style="margin-left: 80px;"><span style="color: rgb(255, 0, 0);">vim /etc/profile</span></div><div style="margin-left: 80px;"><span style="color: rgb(255, 0, 0);">末尾添加如下两行:</span></div><div style="margin-left: 80px;"><span style="color: rgb(255, 0, 0);">export MAVEM_HOME=/usr/local/maven/apache-maven-3.6.0</span></div><div style="margin-left: 80px;"><span style="color: rgb(255, 0, 0);">export PATH=$PATH:$MAVEM_HOME/bin</span></div><div style="margin-left: 80px;"><span style="color: rgb(255, 0, 0);">再重新加载配置文件: </span>source /etc/profile</div><div><br/></div><div>    </div><div>4.测试</div><div>      mvn -v    </div><div>    打印信息如下:</div><div>    <img src="Maven_files/Image [11].png" type="image/png" data-filename="Image.png" width="547"/></div><div><br/></div><div>-------------------------------------------------------------------------------------------------------------------------------------------------------------</div><div>5.maven项目创建</div><div>  1.maven项目目录结构</div><div>    <img src="Maven_files/Image [12].png" type="image/png" data-filename="Image.png"/></div><div><br/></div><div>    project  </div><div>            -|src</div><div>                    |-main: 存放主业务逻辑</div><div>                          |-<span style="color: rgb(255, 0, 0);">java</span>: java源代码  </div><div>                          |-resources: 主业务逻辑里的配置文件(如一些xml和properties文件)</div><div>                    |-test: 存放单元测试的代码 </div><div>                          |-<span style="color: rgb(255, 0, 0);">java</span>: 测试用的java源代码<span style="font-size: unset; color: rgb(255, 0, 0); font-family: unset;">(</span><span style="font-size: unset;"><span style="font-size: unset; color: rgb(255, 0, 0); font-family: unset;">注意:测试的代码要和主业务逻辑的源代码在同一个package下</span></span><span style="font-size: unset; color: rgb(255, 0, 0); font-family: unset;">)</span></div><div>                          |-resources: 测试时需要的配置文件 </div><div>              |target: 输出目录(用来如编译、打包, 这个文件夹不用自己创建, 这个目录会在运行时自动生成)</div><div>              |pom.xml: maven项目的配置文件(用于配置构建和依赖管理)    </div><div><br/></div><div>             </div><div><span style="font-weight: bold;"> 下面是纯手动生成(不用eclipse)maven项目时的方式: </span></div><div><span style="font-weight: bold;">   </span> 所有的jar包其实就是个压缩包, <span style="color: rgb(166, 0, 196);">Maven安装包里</span>的类库lib里的jar包也是用maven编写的, 所以直接解压出来也会有pom.xml文件。可以解压一个看看pom.xml文件里面一般都有写的内容。</div><div>    <img src="Maven_files/Image [13].png" type="image/png" data-filename="Image.png" width="748"/></div><div>    </div><div><br/></div><div>    如果在maven项目中需要用到别的项目的jar包,则只需要在pom.xml中用gav(坐标)的形式表示出来要导的包在何处, 而以前要用jar包,不用maven的话, 则需要将jar包引用或者复制到项目中。maven则只需要在配置文件中指出,既不会使项目所占储存空间过大, 也不会有引用失效的问题。</div><div>    如下面的例子中, 需要用到org.junit.Test包:</div><div>    <img src="Maven_files/Image [14].png" type="image/png" data-filename="Image.png" width="562"/></div><div>    则只需要在pom.xml 中的&lt;project&gt; &lt;/project&gt;关键字中加入如下内容:</div><div>    <img src="Maven_files/Image [15].png" type="image/png" data-filename="Image.png" width="641"/></div><div><br/></div><div>   2.maven命令 </div><div>        (下面这些命令都要在具体的项目的一级目录下用cmd执行,否则不知道管理的是哪个项目。)</div><div>        如在c: \maven\目录下有个项目叫HelloWorld:</div><div>        <img src="Maven_files/Image [16].png" type="image/png" data-filename="Image.png"/></div><div>        则用命令行执行maven命令时要cd到该目录下。如执行mvn test命令时命令行要在如下目录:</div><div>        <img src="Maven_files/Image [17].png" type="image/png" data-filename="Image.png"/></div><div><br/></div><div>    <span style="color: rgb(166, 0, 196);">mvn compile</span>:编译(编译主业务逻辑,也就是编译maven项目目录结构中的main文件夹下的东西。会在该maven项目的一级目录中生成一个target文件夹)</div><div>        <img src="Maven_files/Image [18].png" type="image/png" data-filename="Image.png" width="618"/></div><div>    <span style="color: rgb(166, 0, 196);">mvn test</span>: 用于单元测试(如果测试前没有编译, 还会自动先编译再测试)</div><div>    <span style="color: rgb(166, 0, 196);">mvn clean</span>: 清理(将编译和测试内容删除, 也就是会把target文件夹里的所有内容清理掉(target里之前打好的包也会清理掉)。可以在重新测试该项目前执行该操作)</div><div>    <span style="color: rgb(166, 0, 196);">mvn package</span>:打包(默认打成jar。如果是web项目,通常我们会选择打成war。打包成功的包会放在target目录下。打包的时候如果没有编译和测试会先进行一遍编译和测试,确保程序没错时才会进行打包, 有错的话则打包失败。打包的过程实际上是先清理(这里的清理不会清理掉target里之前打的包),再编译,然后测试。)</div><div>        打包的包名可以另外设置: 只要在pom.xml文件中的&lt;project&gt;&lt;/project&gt;之间加入如下内容即可:</div><div>                <img src="Maven_files/Image [19].png" type="image/png" data-filename="Image.png"/></div><div style="margin-left: 40px;">则包名由原来的 hello-0.0.1-SNAPSHOT.jar 变为了 hello.jar 。<span style="color: rgb(166, 0, 196);">(但要注意, 发布时的包名还是会按照gav坐标里的定义来发布包名, 不会因为配置构建的包名设置而改变, 也就是说发布时的包名是</span><span style="font-size: unset; color: rgb(166, 0, 196); font-family: unset;">hello-0.0.1-SNAPSHOT.jar而不是hello.jar。还是这也是gav存在的意义, 保证了坐标的唯一性, 不会随便篡改,别人想引用你的包也只需要把你定义的gav坐标复制到他的pom.xml 文件里即可, 而不用在意你配置构建里配置成了什么包名)</span></div><div>    <span style="color: rgb(166, 0, 196);">mvn install</span>: 发布(打包并且发布到仓库里面去,但要注意只是发布到本地仓库(发布到之前我们在配置文件配置的本地仓库路径)。发布之前会清理(不会清理掉target里之前打的包)、编译、测试、打包)</div><div>    mvn install 还可以直接在Windows命令行或者Linux本地直接执行。准备好要发布到本地仓库的jar包。然后通过如下命令: (其中<span style="font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(77, 77, 77); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: common-ligatures;">-DgroupId、</span><span style="font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(77, 77, 77); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: common-ligatures;">-DartifactId、</span><span style="font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(77, 77, 77); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: common-ligatures;">-Dversion</span>是该jar包的gav坐标)</div><div style="margin-left: 40px;"><span style="font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(77, 77, 77); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: common-ligatures;">mvn install:install-file -Dfile=jar包所在的路径 -DgroupId=groupId -DartifactId=artifactId -Dversion=上面的version -Dpackaging=jar</span></div><div>       示例如下:</div><div>        <img src="Maven_files/20171210205619323.png" type="image/png" data-filename="20171210205619323.png" width="613"/>  </div><div>    组合命令:</div><div>    <span style="color: rgb(166, 0, 196);">mvn clean package</span> : 先清理掉target目录下的所有内容,再打包</div><div>    <span style="color: rgb(166, 0, 196);">mvn clean install</span> : 先清理掉target目录下的所有内容,再发布</div><div>----------------------------------------------------------------------------------------------------------------------------------</div><div>6.eclipse中创建maven项目</div><div><span style="color: rgb(255, 0, 0); font-weight: bold;">  6.1 将maven集成到eclipse中(也属于安装maven的一部分)</span></div><div>    在eclipse的菜单栏的:  Window -&gt; Preferences -&gt; 搜索&quot;Maven&quot; -&gt; </div><div>        做两件事:</div><div>        (1)选择&quot;Installation&quot; -&gt; 点击&quot;add&quot; -&gt; 选择自己的maven安装目录并确定 -&gt; 选中该选项 -&gt; Apply</div><div>            (只到安装目录,不到安装目录的\bin文件夹,如下图)</div><div>            <img src="Maven_files/Image [20].png" type="image/png" data-filename="Image.png" width="717"/></div><div>        (2)选择&quot;User Settings<span style="font-size: unset; color: unset; font-family: unset;">&quot; : </span></div><div style="margin-left: 80px;"><span style="font-size: unset; color: unset; font-family: unset;">因为我们的安装目录并不是默认的c盘下的,所以要把Global Settings(全局配置)和User Settings(用户配置)的路径都改一下, 改成我们的安装目录下conf\settings.xml文件(当然这里并没有区分用户配置和全局配置的配置文件, 如果需要,可以让用户配置和全局配置为两个不同目录下的文件,也就是这里设置时保持User Settings为系统预设的默认目录不变。这里只是学习使用,所以不区分全局和用户配置)。改完之后,下面的Local Repository(本地仓库)也会改变为我们安装maven时配置的本地仓库目录。如下:</span></div><div style="margin-left: 40px;"><span style="font-size: unset; color: unset; font-family: unset;">        </span><img src="Maven_files/Image [21].png" type="image/png" data-filename="Image.png" width="548"/></div><div><span style="font-size: unset; color: unset; font-family: unset;">            </span></div><div><br/></div><div>  6.2 创建maven项目</div><div><br/></div><div>     1)<span style="color: rgb(166, 0, 196);">骨架式</span>: 也就是调用了模板,模板里面已经把maven基本的框架(骨架)已经搭建起来了, 基本的配置信息也已经写好了,只需写自己的核心业务模块即可</div><div>     2)<span style="color: rgb(166, 0, 196);">简单项目式</span>: 也就是只创建一个基本目录, 所有东西都需要全部手工写上去, 手工进行配置    </div><div>        </div><div>      首先: 新建&quot;Maven Project&quot;项目:      </div><div>        <img src="Maven_files/Image [22].png" type="image/png" data-filename="Image.png" width="483"/></div><div>        接下来红框如果不勾的话就是&quot;骨架式&quot;,接下来就会给你一些项目模板让你选择一个(其实就是加载相应模板的配置信息,下载一些插件); 勾的话就是&quot;简单项目式&quot;,接下来就会跳过模板的选择, 直接创建为一个简单项目。我们先不勾下图红框的选项,先创建为骨架式, 点击Next。</div><div>        <img src="Maven_files/Image [23].png" type="image/png" data-filename="Image.png" width="608"/></div><div>        接下来有很多的骨架,使用最多的就是下面红框中的两个,quickstart意思是创建一个java项目, webapp意思是创建为一个web项目。先创建为一个java项目, 点击next。</div><div>        <img src="Maven_files/Image [24].png" type="image/png" data-filename="Image.png" width="620"/></div><div>        接下来就是设置gav(坐标)信息了,指定到时候发布时的jar包的唯一标识。再点击finish即可。</div><div>        <img src="Maven_files/Image [25].png" type="image/png" data-filename="Image.png" width="616"/></div><div>        成功之后的目录结构如下:</div><div>        <img src="Maven_files/Image [26].png" type="image/png" data-filename="Image.png"/></div><div>        如果有需要, 还可以添加两个源代码目录(Source Folder): src/main/resources和src/test/resources, 这样就是完整的maven项目目录结构的样子了。添加方法如下:</div><div>        <img src="Maven_files/Image [27].png" type="image/png" data-filename="Image.png" width="482"/></div><div>        添加完后的目录结构是:</div><div>        <img src="Maven_files/Image [28].png" type="image/png" data-filename="Image.png"/></div><div>        src/main/java和src/test/java的包里有两个自动生成的类, 如果不需要可以删除。</div><div>        项目里的pom.xml点开后默认的样子如下: </div><div>        <img src="Maven_files/Image [29].png" type="image/png" data-filename="Image.png" width="777"/></div><div>        也可以点下面的的框&quot;pom.xml&quot;切换成源码模式:</div><div>        <img src="Maven_files/Image [30].png" type="image/png" data-filename="Image.png" width="830"/></div><div><br/></div><div>        <img src="Maven_files/Image [31].png" type="image/png" data-filename="Image.png" width="824"/></div><div>        <img src="Maven_files/Image [32].png" type="image/png" data-filename="Image.png" width="840"/></div><div>        <img src="Maven_files/Image [33].png" type="image/png" data-filename="Image.png" width="584"/></div><div>            主业务类的代码如下:</div><div>            <img src="Maven_files/Image [34].png" type="image/png" data-filename="Image.png"/></div><div>            测试类的代码如下:</div><div>            <img src="Maven_files/Image [35].png" type="image/png" data-filename="Image.png" width="566"/></div><div><br/></div><div>            注意让整个项目运行的方法如下:(如果在项目中的某个类的代码编辑页面运行的话,则只是让该类运行了而已)</div><div>            <img src="Maven_files/Image [36].png" type="image/png" data-filename="Image.png" width="534"/></div><div>           则会出现如下界面: </div><div>                 <img src="Maven_files/Image [37].png" type="image/png" data-filename="Image.png" width="608"/></div><div>                接下来在Console窗口就是打印运行的信息,并且会在target文件夹里生成相应的文件</div><div>                <img src="Maven_files/Image [38].png" type="image/png" data-filename="Image.png"/></div><div> </div><div><br/></div><div>       如果是创建web项目,反而很多时候不会选择骨架式创建项目,反而会选择简单项目式来创建项目, 因为骨架式一旦修改起来的话会比较麻烦。创建步骤如下:</div><div>        <img src="Maven_files/Image [39].png" type="image/png" data-filename="Image.png" width="598"/></div><div>        下面是创建简单项目时的界面:</div><div>        <img src="Maven_files/Image [40].png" type="image/png" data-filename="Image.png" width="582"/></div><div>         创建完的项目如下,可以发现比原来的src中多了一个webapp目录(原来的src目录与Java Resources目录里的东西完全一致), 这也是项目创建出来就报错的原因, 缺少了web所需要的东西。</div><div>        <img src="Maven_files/Image [41].png" type="image/png" data-filename="Image.png" width="336"/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><span style="color: rgb(255, 0, 0);">如果要找某个依赖jar包的</span><span style="color: rgb(255, 0, 0);">gav坐标写到pom.xml来配置&lt;dependency&gt;&lt;/dependency&gt;</span><span style="color: rgb(255, 0, 0);">,可以去下面这个网站找:</span></div><div>     <a href="https://mvnrepository.com/">https://mvnrepository.com/</a></div><div>     在选择版本号的时候如果不知道该选哪个版本的话, 一般选择使用量比较大的并且日期相对比较新的(版本号比较新的)</div><div><br/></div><div><br/></div><div> 6.3 依赖管理&lt;dependency&gt;&lt;/dependency&gt;里面的&lt;scope&gt;&lt;/scope&gt;:</div><div>   关键字scope的意思是作用域。&lt;scope&gt;&lt;/scope&gt;里面可以写的值有下面几个: </div><div>     <span style="color: rgb(166, 0, 196);">compile</span>: 默认情况下就是这个。即不定义&lt;scope&gt;&lt;/scope&gt;属性的话就是等价于显式的写&lt;scope&gt;compile&lt;/scope&gt;。意味着在任何情况下(编译、打包、部署、测试等)该依赖jar包都是起作用的。</div><div>     <span style="color: rgb(166, 0, 196);">test</span>: 只在测试时有效(比如junit包就只需在测试时有效即可)</div><div>     <span style="color: rgb(166, 0, 196);">provided</span>: 在编译时起效,运行(或部署)时不生效。(比如servlet-api, 在部署到服务器后服务器有自己的servlet-api,不会用项目提供的)</div><div>     <span style="color: rgb(166, 0, 196);">runtime</span>: 在运行(部署)时起效,编译时不起效。(java里的反射机制就是运行时生效,编译时不生效。比如com.mysql.jdbc.Driver,数据库连接工具在编译时肯定是不生效的)</div><div><br/></div><div>  6.4 tomcat插件使用</div><div>     &lt;!-- 在项目的pom.xml中添加插件 tomcat--&gt;</div><div>      &lt;plugins&gt;</div><div>          &lt;plugin&gt;</div><div>               &lt;groupId&gt;org.apache.tomcat.maven&lt;/groupId&gt;</div><div>             &lt;artifactId&gt;tomcat7-maven-plugin&lt;/artifactId&gt;</div><div>             &lt;configuration&gt;</div><div>                 &lt;port&gt;8080&lt;/port&gt;</div><div>                 &lt;path&gt;/&lt;/path&gt;</div><div>             &lt;/configuration&gt;</div><div>          &lt;/plugin&gt;</div><div>      &lt;/plugins&gt;</div><div><br/></div><div>    则运行整个maven项目时的Goals变为下面这个:</div><div>          tomcat7:run    </div><div>        </div><div> -------------------------------           </div><div><br/></div><div>&lt;dependencies&gt;是依赖, 父pom.xml里定义的依赖, 子模块继承后自动包含这些依赖, 该子模块的pom.xml里不用再写该依赖。</div><div>&lt;dependencyManagement&gt;依赖管理, 依赖管理可以理解为声明, 但项目里没有真的引入这个jar包(下载下来导入项目等)。dependencyManagement一般放在父pom.xml文件里, 最重要的作用是管理依赖的版本号, 让子模块都是使用同一个版本的依赖jar包, 一旦定义了dependencyManagement, 那就可在子模块里依赖该jar时, 不写该依赖的版本号。</div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div></span>
</div></body></html> 